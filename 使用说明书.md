# 抽卡机器人使用说明书

> 本文档为抽卡机器人的完整使用指南，涵盖所有核心功能的使用方法、命令说明和管理操作。

---

## 📋 目录

- [快速开始](#快速开始)
- [基础功能](#基础功能)
  - [抽卡功能](#抽卡功能)
  - [签到功能](#签到功能)
  - [盲盒功能](#盲盒功能)
- [抽奖功能](#抽奖功能)
- [分享功能](#分享功能)
- [虚拟商店](#虚拟商店)
- [红包功能](#红包功能)
- [邀请系统](#邀请系统)
- [排行榜](#排行榜)
- [群组管理](#群组管理)
- [管理员功能](#管理员功能)
- [常见问题](#常见问题)

---

## 🚀 快速开始

### 首次使用

1. **启动机器人**
   - 在群组中发送 `/start` 命令注册账户
   - 或在私聊中发送 `/start` 开始使用

2. **查看帮助**
   - 发送 `/help` 或 `/帮助` 查看所有可用命令
   - 发送 `/profile` 或 `/资料` 查看个人信息
   - 发送 `/manual` 或 `/说明书` 查看完整使用说明书

3. **获取积分**
   - 每日签到：发送 `/checkin` 或 `/签到`（每天最多2次）
   - 群组发言：有效发言可获得积分（每日上限100积分）

### 命令别名说明

为了方便使用，所有命令都支持别名。您可以使用中文别名代替英文命令，例如：
- `/gacha` 可以用 `/抽卡` 代替
- `/checkin` 可以用 `/签到` 代替
- `/profile` 可以用 `/资料` 代替

每个命令的所有别名都列在说明书的命令说明表格中。您可以根据个人习惯选择使用英文命令或中文别名。

---

## 🎲 基础功能

### 抽卡功能

#### 命令说明

| 命令 | 别名 | 使用场景 | 说明 |
|------|------|---------|------|
| `/gacha` | `抽卡` | 群聊/私聊 | 打开抽卡选择界面 |
| `/gacha_stats` | `统计`、`抽卡统计`、`我的统计` | 群聊/私聊 | 查看抽卡统计信息 |
| `/prize_pool` | `奖池`、`奖品池`、`奖池信息` | 群聊/私聊 | 查看奖品池信息 |
| `/prizes` | `奖品`、`奖品列表`、`奖励` | 群聊 | 查看我的奖品列表（私聊发送） |
| `/subscription` | `订阅`、`我的订阅`、`订阅列表` | 群聊/私聊 | 查看我的订阅列表 |
| `/manual` | `说明书`、`使用说明`、`帮助文档`、`使用手册`、`文档` | 群聊/私聊 | 发送说明书链接 |

#### 使用方法

**1. 开始抽卡**

在群组或私聊中发送：
```
/gacha
```

机器人会显示抽卡选择界面：
- 🎲 单抽：消耗 100 积分
- 🎲🎲 十连抽：消耗 900 积分（优惠100积分）

**2. 查看抽卡统计**

```
/gacha_stats
```

显示信息包括：
- 总抽卡次数
- 中奖次数
- 中奖率
- 连续未中奖次数

**3. 查看奖品池**

```
/prize_pool
```

显示所有可用奖品及其概率信息。

**4. 查看我的奖品**

在群组中发送：
```
/prizes
```

奖品列表会通过私聊发送给您。

**5. 查看我的订阅**

```
/subscription
```

显示您通过抽卡获得的订阅列表，包括订阅状态、流量使用情况等信息。

**6. 查看说明书**

```
/manual
```

或使用别名：
```
/说明书
/使用说明
/帮助文档
```

发送说明书链接，管理员可以通过 `/manual <链接>` 设置新的说明书链接。

#### 使用示例

```
用户: /gacha
机器人: 🎲 抽卡系统
        选择抽卡方式：
        • 单抽：100积分
        • 十连抽：900积分（优惠100积分）
        [点击按钮选择抽卡方式]
```

---

### 签到功能

#### 命令说明

| 命令 | 别名 | 使用场景 | 说明 |
|------|------|---------|------|
| `/checkin` | `签到`、`每日签到`、`打卡` | 群聊/私聊 | 每日签到获得积分 |

#### 使用方法

**每日签到**

```
/checkin
```

**签到规则：**
- 每天最多可签到 2 次
- 连续签到有奖励加成（最高2.0倍）
- 前3名签到有额外排名奖励：
  - 🥇 第1名：额外20积分 + 2虚拟币
  - 🥈 第2名：额外10积分 + 1虚拟币
  - 🥉 第3名：额外5积分

**签到奖励：**
- 基础积分：根据连续签到天数递增
- 虚拟币：根据连续签到天数递增
- 连续签到加成：最高2.0倍

#### 使用示例

```
用户: /checkin
机器人: 👤 张三

        🌸 早上好 🌸

        🥇 第一名
        获得早起奖励！

        ━━━━━━━━━━━━━━━
        📅 今日签到: 1/2
        🔥 连续签到: 5 天
        ⚡ 奖励倍数: 1.5x
        ━━━━━━━━━━━━━━━

        💰 获得积分: +30 (排名奖励 +20)
        💎 获得虚拟币: +3 (排名奖励 +2)

        ━━━━━━━━━━━━━━━
        💫 当前积分: 150
        ✨ 当前虚拟币: 15
```

---

### 盲盒功能

#### 命令说明

| 命令 | 别名 | 使用场景 | 说明 |
|------|------|---------|------|
| `/blind_box` | `盲盒`、`开盲盒`、`神秘盒子`、`幸运盒子` | 群聊/私聊 | 开启盲盒获得随机积分 |

#### 使用方法

**开启盲盒**

```
/blind_box
```

**开启条件：**
- 需要达到每日积分上限（默认50-200分）
- 每日只能开启一次

**奖励范围：**
- 随机获得 50-200 积分

#### 使用示例

```
用户: /blind_box
机器人: 🎁 盲盒开启成功！

        💰 获得积分: +120

        💫 当前积分: 270
```

---

## 🎰 抽奖功能

### 功能概述

抽奖功能允许管理员在群组中创建抽奖活动，群成员可以参与抽奖。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/create_lottery` | `创建抽奖`、`抽奖`、`新建抽奖`、`发起抽奖`、`抽奖活动` | 群聊 | 群管理员 | 创建抽奖活动 |
| `/list_lotteries` | `查看抽奖列表`、`抽奖列表`、`所有抽奖` | 群聊 | 所有人 | 查看当前群组的抽奖列表 |
| `/stop_lottery` | `停止抽奖`、`取消抽奖`、`终止抽奖` | 群聊 | 创建者/管理员 | 停止抽奖活动 |
| `/my_lottery_wins` | `我的中奖`、`中奖记录`、`我中奖了`、`查看中奖`、`我的奖品` | 群聊/私聊 | 所有人 | 查看我的中奖记录 |
| `/export_lottery_participants` | `导出抽奖参与者`、`导出抽奖名单`、`抽奖参与者`、`导出参与者` | 群聊 | 创建者/管理员 | 导出参与用户列表 |

### 创建抽奖

#### 步骤1：启动创建流程

在群组中发送：
```
/create_lottery
```

#### 步骤2：设置抽奖信息

机器人会引导您完成以下设置：

1. **抽奖标题**：输入抽奖活动的名称
2. **抽奖模式**：
   - 口令抽奖：参与者发送指定口令参与
   - 按钮抽奖：参与者点击按钮参与
3. **开奖方式**：
   - 手动开奖：管理员手动开奖
   - 定时开奖：设置开奖时间自动开奖
4. **奖品设置**：添加奖品名称和数量
5. **其他选项**：
   - 是否需要加入指定群组
   - 是否启用双倍中奖机会（消耗积分）
   - 是否启用参与费用（消耗积分）

#### 使用示例

```
用户: /create_lottery
机器人: 🎰 创建抽奖活动

        请按照提示完成设置...

步骤1: 请输入抽奖标题
用户: 新年大抽奖
机器人: ✅ 标题设置成功

步骤2: 请选择抽奖模式
        [口令抽奖] [按钮抽奖]
用户: [点击"口令抽奖"]
机器人: ✅ 已选择：口令抽奖
        请输入参与口令：
用户: 新年快乐
机器人: ✅ 口令设置成功

步骤3: 请选择开奖方式
        [手动开奖] [定时开奖]
用户: [点击"定时开奖"]
机器人: 请输入开奖时间（格式：YYYY-MM-DD HH:MM）
用户: 2024-01-01 20:00
机器人: ✅ 开奖时间设置成功

步骤4: 请添加奖品
        输入奖品名称（输入 /done 结束）：
用户: iPhone 15
机器人: 请输入该奖品的数量：
用户: 1
机器人: ✅ 奖品设置成功
        您可以继续输入奖品的名称或输入 /done 结束
用户: /done
机器人: ✅ 抽奖创建成功！
        抽奖消息已发送到群组
```

### 参与抽奖

#### 方式1：口令抽奖

在群组中发送抽奖口令：
```
新年快乐
```

#### 方式2：按钮抽奖

点击抽奖消息中的"参与抽奖"按钮。

### 查看抽奖列表

```
/list_lotteries
```

显示当前群组所有进行中的抽奖活动。

### 停止抽奖

```
/stop_lottery <抽奖ID>
```

或回复抽奖消息：
```
/stop_lottery
```

### 查看中奖记录

```
/my_lottery_wins
```

显示您在所有抽奖中的中奖记录。

---

## 📤 分享功能

### 功能概述

分享功能允许用户在群组中创建分享内容（文本、订阅链接等），其他用户可以通过访问链接领取。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/create_sharing` | `创建分享`、`分享`、`新建分享`、`发布分享` | 群聊 | 所有人 | 创建分享内容 |
| `/my_sharings` | `我的分享`、`分享列表`、`我发布的`、`分享记录` | 群聊/私聊 | 所有人 | 查看我的分享列表 |
| `/my_claims` | `我的领取`、`领取记录`、`我领取的`、`领取列表` | 群聊/私聊 | 所有人 | 查看我领取的分享 |
| `/my_claim_stats` | `领取统计`、`访问统计`、`领取数据`、`分享统计` | 群聊/私聊 | 所有人 | 查看我的领取访问统计 |
| `/access_logs` | `访问记录`、`查看访问记录`、`分享访问记录`、`访问日志` | 私聊 | 管理员 | 查看所有分享访问记录 |

### 创建分享

#### 步骤1：启动创建流程

在群组中发送：
```
/create_sharing
```

#### 步骤2：设置分享信息

机器人会引导您完成以下设置：

1. **分享标题**：输入分享内容的标题
2. **分享内容**：
   - 文本内容
   - 订阅链接（http:// 或 https:// 开头）
   - Clash 订阅链接
3. **领取设置**：
   - 领取费用（积分，可选）
   - 最大领取次数（可选）
   - 过期时间（可选）

#### 使用示例

```
用户: /create_sharing
机器人: 📤 创建分享内容

        请按照提示完成设置...

步骤1: 请输入分享标题
用户: 免费订阅分享
机器人: ✅ 标题设置成功

步骤2: 请输入分享内容
        支持文本、订阅链接等
用户: https://example.com/subscribe
机器人: ✅ 内容设置成功
        检测到订阅链接类型

步骤3: 设置领取费用（积分，直接发送数字，0表示免费）
用户: 0
机器人: ✅ 费用设置成功

步骤4: 设置最大领取次数（直接发送数字，0表示无限制）
用户: 100
机器人: ✅ 最大领取次数设置成功

步骤5: 设置过期时间（格式：YYYY-MM-DD HH:MM，或输入 0 表示永不过期）
用户: 2024-12-31 23:59
机器人: ✅ 分享创建成功！
        分享消息已发送到群组
```

### 查看我的分享

```
/my_sharings
```

显示您创建的所有分享内容及其统计信息。

### 查看我领取的分享

```
/my_claims
```

显示您领取过的所有分享内容。

### 查看访问统计

```
/my_claim_stats
```

显示您的分享被访问和领取的统计信息。

---

## 🏪 虚拟商店

### 功能概述

虚拟商店允许用户使用虚拟币购买商品（文本、链接、文件、订阅等）。

### 命令说明

| 命令 | 别名 | 使用场景 | 说明 |
|------|------|---------|------|
| `/shop` | `商店`、`虚拟商店`、`购物`、`购买` | 群聊 | 浏览虚拟商店（私聊发送） |

### 浏览商店

在群组中发送：
```
/shop
```

商店界面会通过私聊发送给您。

### 购买商品

1. 在私聊中查看商店界面
2. 点击商品查看详情
3. 选择购买数量
4. 确认购买

### 商品类型

- **文本商品**：购买后获得文本内容
- **链接商品**：购买后获得链接
- **文件商品**：购买后获得文件
- **订阅商品**：购买后获得订阅链接
- **FOFA卡**：天卡/周卡/月卡/次卡

### 使用示例

```
用户: /shop
机器人: [在群组中提示]
        🏪 虚拟商店已发送到您的私聊！
        请在私聊中查看商品并完成购买～

        [私聊中显示]
        🏪 魔法少女的虚拟商店 ✨

        💰 您的余额: 50 虚拟币

        📦 商品列表：
        [商品1] [商品2] [商品3]
        [点击商品查看详情]
```

---

## 🧧 红包功能

### 功能概述

红包功能允许用户在群组中发送红包，其他用户可以领取。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/发红包` / `/红包` | `send_red_packet`、`redpacket`、`发送红包` | 群聊 | 所有人 | 发送普通红包 |
| `/拼手气` / `/lucky` | `lucky_red_packet`、`拼手气红包`、`手气红包` | 群聊 | 所有人 | 发送拼手气红包 |
| `/魔法红包` / `/magic` | `magic_red_packet`、`魔法`、`魔法包` | 群聊 | 所有人 | 发送魔法红包 |
| `/口令红包` / `/keyword` | `keyword_red_packet`、`口令`、`密码红包` | 群聊 | 所有人 | 发送口令红包 |
| `/领红包` / `/claim_red_packet` | `领取红包`、`抢红包` | 群聊 | 所有人 | 领取口令红包 |
| `/red_packet_stats` | `红包统计`、`redpacketstats`、`红包记录`、`我的红包` | 群聊 | 所有人 | 查看红包统计 |
| `/设置红包图片` | `set_red_packet_image`、`红包图片`、`配置红包图片` | 群聊 | 管理员 | 设置红包默认图片 |

### 发送红包

#### 普通红包

```
/发红包 [金额] [份数] [祝福语]
```

**参数说明：**
- `金额`：红包总积分
- `份数`：红包份数
- `祝福语`：可选，红包祝福语

**使用示例：**

```
/发红包 10000 100
/发红包 5000 50 新年快乐
```

#### 拼手气红包

```
/拼手气 [金额] [份数] [祝福语]
```

拼手气红包的金额随机分配，每人领取的金额不同。

#### 魔法红包

```
/魔法红包 [金额] [份数] [祝福语]
```

魔法红包可能触发特殊效果。

#### 口令红包

```
/口令红包 [金额] [份数] [口令] [祝福语]
```

**参数说明：**
- `金额`：红包总积分
- `份数`：红包份数
- `口令`：领取红包的口令
- `祝福语`：可选，红包祝福语

**使用示例：**

```
/口令红包 5000 50 魔法少女
```

### 领取红包

#### 普通/拼手气/魔法红包

点击红包消息中的"开启红包"按钮即可领取。

#### 口令红包

发送命令：
```
/领红包 [口令]
```

**使用示例：**

```
/领红包 魔法少女
```

### 查看红包统计

```
/red_packet_stats
```

显示您的红包发送和领取统计信息。

### 设置红包图片（管理员）

```
/设置红包图片 [图片URL]
```

**使用示例：**

```
/设置红包图片 https://example.com/red_packet.jpg
/设置红包图片 清空  # 清空默认图片，使用每日一图
```

### 红包规则

1. **发送规则：**
   - 管理员发红包使用无限额度
   - 普通用户发红包扣除自己的积分
   - 红包24小时后自动过期

2. **领取规则：**
   - 每个红包每人只能领取一次
   - 口令红包需要输入正确的口令
   - 红包领完后无法再领取

---

## 👥 邀请系统

### 功能概述

邀请系统允许用户生成专属邀请链接，邀请好友加入群组并获得奖励。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/my_invite_link` | `我的邀请链接`、`邀请链接`、`专属邀请`、`获取邀请` | 群聊 | 所有人 | 获取我的专属邀请链接 |
| `/invite_stats` | `邀请统计`、`我的邀请`、`邀请记录` | 群聊 | 所有人 | 查看我的邀请统计 |
| `/invite_leaderboard` | `邀请排行榜`、`邀请排名` | 群聊 | 所有人 | 查看邀请排行榜 |

### 获取邀请链接

```
/my_invite_link
```

生成您的专属邀请链接，分享给好友后，好友通过链接加入群组，您将获得邀请奖励。

### 查看邀请统计

```
/invite_stats
```

显示您的邀请统计信息：
- 总邀请人数
- 有效邀请人数
- 获得的奖励

### 查看邀请排行榜

```
/invite_leaderboard
```

显示群组内邀请排行榜，展示邀请人数最多的用户。

### 邀请奖励

- 邀请好友加入群组可获得积分奖励
- 奖励金额由群组管理员设置
- 具体奖励规则请咨询群组管理员

---

## 📊 排行榜

### 功能概述

排行榜功能显示群组内用户的积分排名。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/leaderboard` | `排行榜`、`积分排行榜`、`积分榜` | 群聊 | 所有人 | 查看积分排行榜 |

### 查看排行榜

```
/leaderboard
```

显示群组内积分排名前20的用户。

**排行榜信息包括：**
- 排名
- 用户名
- 积分
- 虚拟币
- 抽卡次数
- 中奖次数

### 使用示例

```
用户: /leaderboard
机器人: 📊 积分排行榜

        🥇 1. @user1 - 5000积分
        🥈 2. @user2 - 4500积分
        🥉 3. @user3 - 4000积分
        ...
```

---

## 👥 群组管理

### 功能概述

群组管理功能提供用户管理、功能开关等管理工具。

### 命令说明

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/mute` | `禁言`、`沉默`、`闭嘴` | 群聊 | 群管理员 | 禁言用户 |
| `/unmute` | `解除禁言`、`解禁`、`取消禁言` | 群聊 | 群管理员 | 解除禁言 |
| `/kick` | `踢出`、`踢人`、`移出群组` | 群聊 | 群管理员 | 踢出用户 |
| `/ban` | `封禁`、`拉黑`、`永久封禁` | 群聊 | 群管理员 | 封禁用户 |
| `/unban` | `解封`、`解除封禁`、`取消封禁` | 群聊 | 群管理员 | 解封用户 |
| `/call_silent` | `召唤未发言`、`召唤潜水`、`召唤沉默`、`艾特未发言`、`提醒冒泡`、`冒泡提醒` | 群聊 | 群管理员 | 召唤未发言用户 |
| `/id` | `ID`、`用户ID`、`查看ID`、`我的ID` | 群聊/私聊 | 所有人 | 查看用户/群组ID |
| `/switch` | `功能开关`、`开关` | 群聊 | 群管理员 | 功能开关 |

### 禁言用户

#### 方式1：回复消息

回复要禁言用户的消息：
```
/mute
```

#### 方式2：指定用户

```
/mute @username
```

或
```
/mute <用户ID>
```

#### 方式3：指定时长

```
/mute @username 60
```

表示禁言60分钟。

### 解除禁言

```
/unmute @username
```

### 踢出用户

```
/kick @username
```

### 封禁用户

```
/ban @username
```

### 解封用户

```
/unban @username
```

### 召唤未发言用户

```
/call_silent [天数] [<阈值>]
```

**参数说明：**
- `天数`：检查最近N天内的发言（不填表示检查进群后所有发言）
- `阈值`：发言少于N条的用户（默认1，即未发言）

**使用示例：**

```
# 召唤7天内未发言的用户
/call_silent 7

# 召唤7天内发言少于3条的用户
/call_silent 7 <3

# 召唤进群后从未发言的用户
/call_silent
```

### 功能开关

```
/switch <功能名> <on/off>
```

**支持的功能：**
- `gacha` / `抽卡`：抽卡功能
- `checkin` / `签到`：签到功能
- `blindbox` / `盲盒`：盲盒功能
- `shop` / `商店`：商店功能
- `lottery` / `抽奖`：抽奖功能

**使用示例：**

```
# 关闭抽卡功能
/switch gacha off

# 开启签到功能
/switch checkin on

# 使用中文
/switch 抽卡 关
```

### 查看ID

```
/id
```

显示当前用户ID和群组ID。

---

## 🔧 管理员功能

### 功能概述

管理员功能提供系统管理、用户管理、奖品管理等高级功能。

### 命令说明

#### 群组授权管理

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/add_group` | `添加群组` | 群聊/私聊 | 超管 | 添加群组授权 |
| `/remove_group` | `移除群组`、`取消授权`、`群组取消` | 群聊/私聊 | 超管 | 移除群组授权 |
| `/list_groups` | `群组列表`、`授权列表`、`群组管理` | 群聊/私聊 | 超管 | 查看群组列表 |
| `/authorize_group` | `授权群组`、`群组授权` | 群聊/私聊 | 超管 | 授权群组（带有效期） |
| `/revoke_group` | `取消授权`、`撤销授权` | 群聊/私聊 | 超管 | 取消群组授权 |

#### 权限管理

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/grant_admin` | `赋予权限`、`授权管理员` | 群聊/私聊 | 超管 | 授予群管权限 |
| `/revoke_admin` | `撤销权限`、`移除管理员` | 群聊/私聊 | 超管 | 撤销群管权限 |
| `/list_authorized` | `授权列表`、`查看授权` | 群聊/私聊 | 超管 | 查看授权列表 |

#### 用户管理

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/add_points` | `增加积分`、`添加积分`、`加积分`、`给积分`、`奖励积分` | 群聊/私聊 | 超管/群管 | 给用户增加积分 |
| `/remove_points` | `减少积分`、`扣积分`、`减积分`、`扣除积分` | 群聊/私聊 | 超管/群管 | 减少用户积分 |
| `/set_points` | `设置积分`、`改积分`、`修改积分`、`调整积分` | 群聊/私聊 | 超管/群管 | 设置用户积分 |
| `/add_currency` | `增加虚拟币`、`添加虚拟币`、`加虚拟币`、`给虚拟币`、`奖励虚拟币` | 群聊/私聊 | 超管/群管 | 增加用户虚拟币 |
| `/remove_currency` | `减少虚拟币`、`扣虚拟币`、`减虚拟币`、`扣除虚拟币` | 群聊/私聊 | 超管/群管 | 减少用户虚拟币 |
| `/set_currency` | `设置虚拟币`、`改虚拟币`、`修改虚拟币`、`调整虚拟币` | 群聊/私聊 | 超管/群管 | 设置用户虚拟币 |

#### 奖品管理

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/manage_prizes` | `奖品管理`、`管理奖品`、`奖品设置` | 私聊 | 超管/群管 | 奖品管理面板 |
| `/add_prize` | `添加奖品`、`新增奖品`、`创建奖品` | 私聊 | 超管/群管 | 添加新奖品 |
| `/edit_prize` | `编辑奖品`、`修改奖品`、`更新奖品` | 私聊 | 超管/群管 | 编辑奖品信息 |
| `/delete_prize` | `删除奖品`、`移除奖品`、`删除奖励` | 私聊 | 超管/群管 | 删除奖品 |
| `/prize_details` | `奖品详情`、`奖品信息`、`奖励详情` | 私聊 | 超管/群管 | 查看奖品详情 |
| `/prize_stats` | `奖品统计`、`统计信息`、`奖品数据`、`奖品分析` | 私聊 | 超管/群管 | 查看奖品统计 |
| `/confirm_delete` | `确认删除`、`确认`、`确定删除` | 私聊 | 超管/群管 | 确认删除操作 |

#### 系统管理

| 命令 | 别名 | 使用场景 | 权限要求 | 说明 |
|------|------|---------|---------|------|
| `/admin` | `管理`、`管理员`、`管理面板` | 群聊/私聊 | 超管 | 管理员面板 |
| `/disable_command` | `禁用命令`、`关闭命令`、`禁用`、`关闭功能` | 群聊 | 群管 | 禁用命令 |
| `/enable_command` | `启用命令`、`开启命令`、`启用`、`开启功能` | 群聊 | 群管 | 启用命令 |
| `/group_config` | `群组配置`、`配置`、`查看配置` | 群聊 | 群管 | 群组配置 |
| `/security_status` | `安全状态`、`安全检查`、`安全信息` | 私聊 | 超管 | 查看安全状态 |
| `/alert_history` | `预警历史`、`安全预警`、`预警记录` | 私聊 | 超管 | 查看预警历史 |
| `/heartbeat` | `心跳`、`心跳检测`、`系统状态`、`健康检查` | 私聊 | 超管 | 系统心跳检测 |
| `/device_list` | `设备列表`、`我的设备`、`设备管理` | 私聊 | 超管 | 查看用户设备列表 |
| `/test_gacha` | `测试抽卡`、`抽卡测试`、`概率测试` | 私聊 | 超管 | 测试抽卡概率 |
| `/update_subscriptions` | `更新订阅`、`更新订阅信息`、`更新订阅列表`、`更新订阅状态` | 私聊 | 超管 | 更新订阅信息 |
| `/update_prize_status` | `更新奖品状态`、`奖品状态`、`状态更新` | 私聊 | 超管 | 更新奖品状态 |
| `/clear_points_conditional` | `条件清空积分`、`清空积分`、`批量清空积分`、`条件清空`、`清空用户积分` | 私聊 | 超管 | 条件清空积分 |

### 添加群组授权

```
/add_group
```

在群组中发送此命令，机器人会自动注册当前群组。

### 移除群组授权

```
/remove_group <群组ID>
```

### 授予群管权限

```
/grant_admin @username
```

或回复消息：
```
/grant_admin
```

### 撤销群管权限

```
/revoke_admin @username
```

### 给用户增加积分

```
/add_points @username 100
```

或回复消息：
```
/add_points 100
```

### 添加奖品

添加奖品支持两种方式：**群聊发起单个添加**和**私聊批量添加**。

#### 方式1：群聊发起单个添加（交互式）

**步骤：**

1. **在群组中发送命令**
   ```
   /add_prize
   ```
   或使用别名：
   ```
   /添加奖品
   /新增奖品
   /创建奖品
   ```

2. **机器人会引导您到私聊**
   - 机器人会在群组中提示您私聊完成添加
   - 点击按钮或主动私聊机器人

3. **在私聊中完成添加**
   - 选择奖品类型
   - 选择稀有度
   - 根据类型输入相应信息
   - 设置数量限制（可选）
   - 设置中奖概率（可选）

**支持的奖品类型：**

| 类型 | 说明 | 输入内容 |
|------|------|---------|
| 📡 订阅链接 | 机场订阅链接 | 订阅URL，系统自动获取信息 |
| ⭐ 积分奖励 | 积分奖励 | 积分数量（如：100） |
| 💰 虚拟币 | 虚拟币奖励 | 虚拟币数量（如：50） |
| 🎁 实体奖品 | 实体物品 | 奖品名称（如：小米手环） |
| ✨ 自定义奖品 | 自定义奖励 | 奖品名称（如：特殊称号） |

**支持的稀有度：**

| 稀有度 | 标识 | 说明 |
|--------|------|------|
| ⚪ 普通 | common | 基础奖品 |
| 🔵 稀有 | rare | 较稀有奖品 |
| 🟣 史诗 | epic | 史诗级奖品 |
| 🟡 传说 | legendary | 传说级奖品 |
| 👑 神话 | mythic | 神话级奖品 |

**使用示例（群聊发起）：**

```
群聊中：
用户: /add_prize
机器人: ✨ 开始添加奖品流程

        群组：测试群组
        管理员：张三

        请私聊机器人完成奖品添加
        👉 点击这里：@gacha_bot
        [💬 私聊添加奖品 按钮]

私聊中：
机器人: 👋 你好！

        现在开始为 **测试群组** 添加奖品

        请选择要添加的奖品类型：
        [📡 订阅链接] [⭐ 积分奖励] [💰 虚拟币] [🎁 实体奖品] [✨ 自定义奖品]

用户: [点击"📡 订阅链接"]
机器人: 已选择：📡 订阅链接

        请选择稀有度：
        [⚪ 普通] [🔵 稀有] [🟣 史诗] [🟡 传说] [👑 神话]

用户: [点击"🔵 稀有"]
机器人: ✅ 已选择稀有度：🔵 稀有

        📡 **订阅链接类型奖品**

        请发送订阅链接URL：
        例如：https://example.com/sub?token=xxx

        系统将自动获取订阅信息并生成奖品

用户: https://example.com/sub?token=abc123
机器人: ⏳ 正在获取订阅信息...
        ✅ 订阅信息获取成功

        📌 奖品名称：高级机场订阅
        📊 总流量：100GB
        📈 剩余流量：100GB
        ⏰ 过期时间：2024-12-31 23:59:59
        📅 剩余天数：30

        请输入奖品数量限制：
        （输入数字或 0 表示无限制）

用户: 10
机器人: 请输入中奖概率（0-1之间的小数，如 0.02 表示2%）：
        （直接发送数字，如 0.02）

用户: 0.02
机器人: ✅ 奖品添加成功！

        🎯 奖品名称：高级机场订阅
        📡 订阅源：Example Airport
        ⏰ 有效期：30天
        🌐 类型：CLASH
        💫 稀有度：RARE
        🎲 概率：2.00%
        💰 积分成本：1000
        📊 剩余流量：100GB
```

#### 方式2：私聊批量添加（命令式）

**步骤：**

1. **在私聊中发送命令**
   ```
   /add_prize
   ```

2. **选择群组**
   - 机器人会显示您管理的群组列表
   - 选择要添加奖品的群组

3. **进入批量添加模式**
   - 机器人会提示您已进入批量添加模式
   - 可以连续发送多个 `/add_prize` 命令

4. **发送添加命令**
   - 根据奖品类型使用不同的命令格式（见下方）

5. **退出批量添加模式**
   ```
   /exit_add_prize
   ```
   或发送：
   ```
   退出
   exit
   取消
   ```

**命令格式（支持所有类型）：**

**1. 订阅链接类型：**
```
/add_prize <url> type="subscription" probability=0.02 rarity="rare" max_quantity=2
```

**2. 积分类型：**
```
/add_prize type="points" value=100 probability=0.1 rarity="common" max_quantity=0
```

**3. 虚拟币类型：**
```
/add_prize type="currency" value=50 probability=0.05 rarity="rare" max_quantity=0
```

**4. 实体类型：**
```
/add_prize type="physical" name="小米手环" value=0 probability=0.001 rarity="legendary" max_quantity=1
```

**5. 自定义类型：**
```
/add_prize type="custom" name="特殊称号" value=0 probability=0.005 rarity="epic" max_quantity=5
```

**参数说明：**

| 参数 | 必填 | 说明 | 示例 |
|------|------|------|------|
| `<url>` | 订阅类型必填 | 订阅链接URL | `https://example.com/sub?token=xxx` |
| `type` | 是 | 奖品类型 | `"subscription"`、`"points"`、`"currency"`、`"physical"`、`"custom"` |
| `value` | 积分/虚拟币类型必填 | 数值（积分数量或虚拟币数量） | `100`、`50` |
| `name` | 实体/自定义类型必填 | 奖品名称 | `"小米手环"`、`"特殊称号"` |
| `probability` | 否 | 中奖概率（0-1之间） | `0.02`（表示2%） |
| `rarity` | 否 | 稀有度 | `"common"`、`"rare"`、`"epic"`、`"legendary"`、`"mythic"` |
| `max_quantity` | 否 | 最大数量限制 | `10`（0或null表示无限制） |
| `description` | 否 | 描述（实体/自定义类型） | `"实体奖品描述"` |

**⚠️ 注意事项：**
- 订阅类型需要提供 `<url>` 参数
- 积分和虚拟币类型需要提供 `value` 参数
- 实体和自定义类型需要提供 `name` 参数
- 积分和虚拟币类型为全局奖品（`group_id=None`）
- 其他类型可以指定群组（通过批量添加模式自动设置）

**使用示例（批量添加）：**

```
私聊中：
用户: /add_prize
机器人: 📦 **批量添加奖品**

        请选择要添加奖品的群组：
        [群组1] [群组2] [群组3]

用户: [点击"群组1"]
机器人: ✅ 已选择群组：群组1

        📝 **批量添加奖品模式**

        现在您可以连续发送 `/add_prize` 命令来添加多个奖品。

        命令格式：
        `/add_prize <url> type="subscription" probability=0.02 rarity="rare" max_quantity=2`

        发送 `/exit_add_prize` 退出批量添加模式。

用户: /add_prize https://example.com/sub1 type="subscription" probability=0.01 rarity="rare" max_quantity=5
机器人: ✅ 奖品添加成功！

        🎯 奖品名称：高级机场订阅1
        📡 订阅源：Example Airport
        ⏰ 有效期：30天
        🌐 类型：CLASH
        💫 稀有度：RARE
        🎲 概率：1.00%
        💰 积分成本：1000
        📊 剩余流量：100GB

        🔗 订阅URL: https://example.com/sub1

        继续发送 `/add_prize` 命令添加更多奖品，或发送 `/exit_add_prize` 退出。

用户: /add_prize https://example.com/sub2 type="subscription" probability=0.02 rarity="epic" max_quantity=3
机器人: ✅ 奖品添加成功！
        ...

用户: /exit_add_prize
机器人: ✅ **已退出批量添加模式**

        共添加了 2 个奖品。
```

**批量添加各种类型奖品示例：**

```
# 添加订阅链接奖品
/add_prize https://example.com/sub1 type="subscription" probability=0.02 rarity="rare" max_quantity=10

# 添加积分奖励
/add_prize type="points" value=100 probability=0.1 rarity="common" max_quantity=0

# 添加虚拟币奖励
/add_prize type="currency" value=50 probability=0.05 rarity="rare" max_quantity=0

# 添加实体奖品
/add_prize type="physical" name="小米手环" value=0 probability=0.001 rarity="legendary" max_quantity=1

# 添加自定义奖品
/add_prize type="custom" name="特殊称号" value=0 probability=0.005 rarity="epic" max_quantity=5

# 继续添加更多奖品...
/add_prize https://example.com/sub2 type="subscription" probability=0.01 rarity="epic" max_quantity=5
/add_prize type="points" value=200 probability=0.05 rarity="rare" max_quantity=0
```

**完整批量添加示例：**

```
私聊中：
用户: /add_prize
机器人: 📦 **批量添加奖品**

        请选择要添加奖品的群组：
        [群组1] [群组2] [群组3]

用户: [点击"群组1"]
机器人: ✅ 已选择群组：群组1

        📝 **批量添加奖品模式**

        现在您可以连续发送 `/add_prize` 命令来添加多个奖品。

        命令格式示例：
        • 订阅：`/add_prize <url> type="subscription" probability=0.02 rarity="rare" max_quantity=2`
        • 积分：`/add_prize type="points" value=100 probability=0.1 rarity="common" max_quantity=0`
        • 虚拟币：`/add_prize type="currency" value=50 probability=0.05 rarity="rare" max_quantity=0`
        • 实体：`/add_prize type="physical" name="小米手环" probability=0.001 rarity="legendary" max_quantity=1`
        • 自定义：`/add_prize type="custom" name="特殊称号" probability=0.005 rarity="epic" max_quantity=5`

        发送 `/exit_add_prize` 退出批量添加模式。

用户: /add_prize https://example.com/sub1 type="subscription" probability=0.02 rarity="rare" max_quantity=10
机器人: ✅ 奖品添加成功！

        🎯 奖品名称：高级机场订阅1
        📡 订阅源：Example Airport
        ⏰ 有效期：30天
        🌐 类型：CLASH
        💫 稀有度：RARE
        🎲 概率：2.00%
        💰 积分成本：1000
        📊 剩余流量：100GB

        🔗 订阅URL: https://example.com/sub1

        继续发送 `/add_prize` 命令添加更多奖品，或发送 `/exit_add_prize` 退出。

用户: /add_prize type="points" value=100 probability=0.1 rarity="common" max_quantity=0
机器人: ✅ 奖品添加成功！

        🎯 奖品名称：100积分
        ⭐ 类型：积分奖励
        💫 稀有度：COMMON
        🎲 概率：10.00%
        💰 积分数量：100
        📦 数量限制：无限制

        继续发送 `/add_prize` 命令添加更多奖品，或发送 `/exit_add_prize` 退出。

用户: /add_prize type="physical" name="小米手环" value=0 probability=0.001 rarity="legendary" max_quantity=1
机器人: ✅ 奖品添加成功！

        🎯 奖品名称：小米手环
        🎁 类型：实体奖品
        💫 稀有度：LEGENDARY
        🎲 概率：0.10%
        📦 数量限制：1
        📝 描述：小米手环实体奖品

        继续发送 `/add_prize` 命令添加更多奖品，或发送 `/exit_add_prize` 退出。

用户: /exit_add_prize
机器人: ✅ **已退出批量添加模式**

        共添加了 3 个奖品。
```

**注意事项：**

1. **群聊发起单个添加**：
   - ✅ 支持所有奖品类型（订阅、积分、虚拟币、实体、自定义）
   - ✅ 适合添加单个奖品
   - ✅ 交互式流程，操作简单
   - ✅ 需要私聊完成

2. **私聊批量添加**：
   - ✅ **支持所有奖品类型**
   - ✅ 适合批量添加多个奖品
   - ✅ 使用命令格式，效率高
   - ✅ 可以连续添加多个奖品
   - ✅ 支持混合添加不同类型的奖品

3. **订阅链接类型**：
   - 系统会自动获取订阅信息
   - 支持Clash格式自动转换
   - 自动生成奖品名称和描述
   - 批量添加时需要提供 `<url>` 参数

4. **积分和虚拟币类型**：
   - 需要提供 `value` 参数（数值）
   - 为全局奖品（`group_id=None`），所有群组共享
   - 适合作为通用奖励

5. **实体和自定义类型**：
   - 需要提供 `name` 参数（奖品名称）
   - 可以指定群组（通过批量添加模式自动设置）
   - 适合作为特定群组的专属奖励

6. **稀有度选择**：
   - 影响奖品的中奖概率和显示效果
   - 稀有度越高，通常概率越低

7. **数量限制**：
   - `max_quantity=0` 或 `max_quantity=null` 表示无限制
   - 设置数量后，达到上限将无法再中奖

8. **概率设置**：
   - 概率范围：0-1之间
   - 例如：`0.02` 表示2%的中奖概率
   - 所有奖品的概率总和建议不超过1.0

9. **命令格式选择**：
   - 单个添加：使用**方式1**，交互式流程，适合新手
   - 批量添加：使用**方式2**，命令格式，适合批量操作和高级用户

### 管理员面板

```
/admin
```

显示系统状态、用户统计、奖品统计等信息。

---

## ❓ 常见问题

### Q1: 如何获取积分？

**A:** 有以下几种方式：
1. 每日签到：发送 `/checkin`（每天最多2次）
2. 群组发言：有效发言可获得积分（每日上限100积分）
3. 开启盲盒：达到每日积分上限后可开启盲盒获得随机积分
4. 管理员奖励：管理员可以通过 `/add_points` 给您增加积分

### Q2: 抽卡需要多少积分？

**A:** 
- 单抽：100积分
- 十连抽：900积分（优惠100积分）

### Q3: 如何查看我的奖品？

**A:** 在群组中发送 `/prizes`，奖品列表会通过私聊发送给您。

### Q4: 如何创建抽奖？

**A:** 
1. 确保您是群管理员
2. 在群组中发送 `/create_lottery`
3. 按照机器人提示完成设置

### Q5: 如何创建分享？

**A:** 
1. 在群组中发送 `/create_sharing`
2. 按照机器人提示完成设置

### Q6: 商店在哪里？

**A:** 在群组中发送 `/shop`，商店界面会通过私聊发送给您。

### Q7: 如何禁言用户？

**A:** 
- 回复用户消息并发送 `/mute`
- 或发送 `/mute @username`
- 或发送 `/mute <用户ID>`

### Q8: 如何查看用户ID？

**A:** 发送 `/id` 命令即可查看。

### Q9: 如何关闭某个功能？

**A:** 使用 `/switch` 命令，例如：
```
/switch gacha off
```

### Q10: 如何发送红包？

**A:** 
- 普通红包：`/发红包 [金额] [份数]`
- 拼手气红包：`/拼手气 [金额] [份数]`
- 口令红包：`/口令红包 [金额] [份数] [口令]`

### Q11: 如何获取邀请链接？

**A:** 在群组中发送 `/my_invite_link` 即可获取您的专属邀请链接。

### Q12: 如何查看排行榜？

**A:** 在群组中发送 `/leaderboard` 即可查看积分排行榜。

### Q13: 如何查看说明书？

**A:** 发送 `/manual` 或 `/说明书` 命令，机器人会发送说明书链接给您。管理员可以通过 `/manual <链接>` 设置新的说明书链接。

### Q14: 命令别名是什么？

**A:** 命令别名是命令的简化或中文版本，例如 `/gacha` 可以用 `/抽卡` 代替，`/checkin` 可以用 `/签到` 代替。每个命令的别名都列在说明书的命令说明表格中。

### Q15: 如何添加奖品？

**A:** 有两种方式：
1. **群聊发起单个添加**：在群组中发送 `/add_prize`，机器人会引导您到私聊完成添加
2. **私聊批量添加**：在私聊中发送 `/add_prize`，选择群组后进入批量添加模式，可以连续发送命令添加多个奖品

详细说明请查看"管理员功能"章节的"添加奖品"部分。

### Q16: 支持哪些奖品类型？

**A:** 支持5种奖品类型：
- 📡 订阅链接：机场订阅链接，系统自动获取信息
- ⭐ 积分奖励：积分奖励
- 💰 虚拟币：虚拟币奖励
- 🎁 实体奖品：实体物品
- ✨ 自定义奖品：自定义奖励

### Q17: 如何批量添加奖品？

**A:** 
批量添加**支持所有类型的奖品**：
1. 在私聊中发送 `/add_prize`
2. 选择要添加奖品的群组
3. 进入批量添加模式后，根据类型发送命令：
   - 订阅：`/add_prize <url> type="subscription" probability=0.02 rarity="rare" max_quantity=2`
   - 积分：`/add_prize type="points" value=100 probability=0.1 rarity="common" max_quantity=0`
   - 虚拟币：`/add_prize type="currency" value=50 probability=0.05 rarity="rare" max_quantity=0`
   - 实体：`/add_prize type="physical" name="小米手环" probability=0.001 rarity="legendary" max_quantity=1`
   - 自定义：`/add_prize type="custom" name="特殊称号" probability=0.005 rarity="epic" max_quantity=5`
4. 可以连续发送多个命令添加不同类型的奖品
5. 发送 `/exit_add_prize` 退出批量添加模式

### Q18: 如何联系管理员？

**A:** 如果您是群管理员，可以联系超级管理员获取帮助。普通用户请联系群管理员。

---

## 📝 注意事项

1. **权限说明**
   - 超管：超级管理员，拥有所有权限
   - 群管：群组管理员，拥有群组管理权限
   - 普通用户：只能使用基础功能

2. **命令使用场景**
   - 群聊：大部分命令可在群聊中使用
   - 私聊：部分管理命令需要在私聊中使用

3. **积分获取**
   - 每日签到有次数限制
   - 发言积分有每日上限
   - 连续签到有奖励加成

4. **抽奖参与**
   - 需要满足抽奖条件（如加入指定群组）
   - 部分抽奖可能需要消耗积分

5. **商店购买**
   - 需要足够的虚拟币
   - 部分商品有库存限制
   - 部分商品有购买次数限制

---

## 🔄 更新日志

### 版本 1.0
- 初始版本发布
- 支持抽卡、签到、盲盒功能
- 支持抽奖、分享、商店功能
- 支持红包功能（普通、拼手气、魔法、口令红包）
- 支持邀请系统
- 支持排行榜功能
- 支持群组管理功能
- 支持管理员功能
- 支持命令别名系统
- 支持说明书命令（可配置链接）

---

## 📞 技术支持

如有问题或建议，请联系管理员 @winniezz9 或 https://t.me/PrivateLineShare?direct。

---

**最后更新：2025年12月18**

